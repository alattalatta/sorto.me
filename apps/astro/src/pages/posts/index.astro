---
import { getCollection } from 'astro:content'
import ArticleCard from 'components/ArticleCard.astro'
import Footer from 'components/Footer.astro'
import Nav from 'components/Nav.astro'
import ContentGrid from 'layouts/ContentGrid2.astro'
import Shell from 'layouts/Shell.astro'

const posts = [...(await getCollection('posts'))].reverse()
---

<Shell title="sorto.me">
  <ContentGrid>
    <Nav
      links={[
        ['library', [['k-popo', 'https://www.npmjs.com/package/k-popo']]],
        ['experiments', [['dialog98', 'https://dialog98.sorto.me/']]],
        ['blog', posts.map((post) => [post.data.titleShort || post.data.title, `/posts/${post.slug}`])],
        ['docs', [['Web', '/docs/Web']]],
        [
          'contact',
          [
            ['github', 'https://github.com/alattalatta'],
            ['@sorto.me', 'mailto:alattalatta@sorto.me'],
          ],
        ],
      ]}
      slot="nav"
    />
    <main>
      {posts.map((post) => <ArticleCard post={post} />)}
    </main>
    <Footer slot="footer" />
  </ContentGrid>
</Shell>

<style>
  main {
    padding: 2rem 1.5rem 4rem;
  }
</style>
